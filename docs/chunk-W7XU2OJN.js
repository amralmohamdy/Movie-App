import{a as fe}from"./chunk-D6EJJF3N.js";import{a as pe}from"./chunk-NSFZQY46.js";import{a as me}from"./chunk-SKXOHVQE.js";import{c as de,d as ce}from"./chunk-A2E7AYG3.js";import{J as se}from"./chunk-62NZN4HA.js";import{$,Aa as D,Ab as le,Ba as r,C as h,Ca as v,D as b,Da as c,E as W,F as L,Ma as j,Oa as K,Q as S,Qa as d,R as V,Ra as u,Sa as I,T as n,Ta as M,Wa as q,X as U,Y as F,ba as z,bb as H,db as G,e as P,ea as f,fa as x,ga as k,gb as J,hb as X,ia as C,ib as Y,ja as w,ka as _,kb as Z,la as o,ma as a,na as m,pb as ee,qb as te,ra as T,rb as ie,sa as y,tb as ne,ua as s,ub as ae,va as N,wa as O,xa as A,xb as oe,y as g,ya as Q,zb as re}from"./chunk-PZ3TUFL2.js";var E=class t{constructor(i){this.sanitizer=i}transform(i){return this.sanitizer.bypassSecurityTrustResourceUrl(i)}static \u0275fac=function(e){return new(e||t)(U(ee,16))};static \u0275pipe=$({name:"safe",type:t,pure:!0})};var _e=["trailerModal"],ve=()=>[1,2,3,4,5],ge=(t,i)=>({"text-yellow-400":t,"text-gray-300 dark:text-gray-500":i}),he=(t,i)=>i.id;function be(t,i){t&1&&m(0,"app-skeleton",2)}function Ce(t,i){if(t&1&&(o(0,"div",3),r(1),a()),t&2){let e=s();n(),c("\u274C Error: ",e.hasError.message)}}function we(t,i){if(t&1&&(o(0,"p",32),r(1),a()),t&2){let e=s(2);n(),c(' "',e.film.tagline,'" ')}}function ye(t,i){if(t&1&&(o(0,"div",16)(1,"div",33)(2,"div",34),r(3),d(4,"translate"),a()(),o(5,"span",35),m(6,"i",36),r(7),a()()),t&2){let e=s(2);n(3),v(u(4,2,"details.duration")),n(4),c(" ",e.formatRuntime(e.film.runtime)," ")}}function Se(t,i){if(t&1&&m(0,"i",37),t&2){let e=i.$implicit,l=s(3);_("ngClass",K(1,ge,e<l.math(l.film.vote_average),e>=l.math(l.film.vote_average)))}}function ke(t,i){t&1&&(o(0,"div",18),C(1,Se,1,4,"i",37,k),a()),t&2&&(n(),w(j(0,ve)))}function Ee(t,i){if(t&1&&(o(0,"a",26),r(1),a()),t&2){let e=i.$implicit;_("routerLink","/genres/"+e.id),n(),v(e.name)}}function Te(t,i){t&1&&r(0,",")}function De(t,i){t&1&&r(0,".")}function Ie(t,i){if(t&1&&(r(0),f(1,Te,1,0)(2,De,1,0)),t&2){let e=i.$implicit,l=i.$index,p=s(3);c(" ",e.english_name+" ("+e.name+")"," "),n(),x(l+1<p.film.spoken_languages.length?1:2)}}function Me(t,i){if(t&1&&(o(0,"div")(1,"strong"),r(2),d(3,"translate"),a(),C(4,Ie,3,2,null,null,k),a()),t&2){let e=s(2);n(2),c("",u(3,1,"details.language"),":"),n(2),w(e.film.spoken_languages)}}function Be(t,i){if(t&1&&(o(0,"div",29)(1,"strong"),r(2,"Production:"),a(),o(3,"div",38)(4,"div",33)(5,"div",34),r(6),a()(),m(7,"img",39),a()()),t&2){let e=s(2);n(6),v(e.film.production_companies[0].name),n(),_("src",e.imageBase+e.film.production_companies[0].logo_path,S)}}function Re(t,i){if(t&1&&(o(0,"div")(1,"strong"),r(2),d(3,"translate"),a(),r(4),d(5,"currency"),a()),t&2){let e=s(2);n(2),c("",u(3,2,"details.budget"),":"),n(2),c(" ",M(5,4,e.film.budget,"USD","symbol"))}}function Pe(t,i){if(t&1&&(o(0,"div")(1,"strong"),r(2),d(3,"translate"),a(),r(4),d(5,"currency"),a()),t&2){let e=s(2);n(2),c("",u(3,2,"details.revenue"),":"),n(2),c(" ",M(5,4,e.film.revenue,"USD","symbol"))}}function We(t,i){if(t&1&&(o(0,"a",31),r(1),d(2,"translate"),a()),t&2){let e=s(2);_("href",e.film.homepage,S),n(),v(u(2,2,"details.website"))}}function Le(t,i){if(t&1){let e=T();o(0,"a",40),y("click",function(p){h(e);let xe=Q(6),R=s(2);return R.openModal(R.trailerKey),p.preventDefault(),b(xe.showModal())}),W(),o(1,"svg",41),m(2,"path",42),a(),r(3),d(4,"translate"),a(),L(),o(5,"dialog",43,0),y("click",function(){h(e);let p=s(2);return b(p.closeModal())}),o(7,"div",44)(8,"form",45)(9,"button",46),y("click",function(){h(e);let p=s(2);return b(p.closeModal())}),r(10," \u2715 "),a()(),o(11,"div",47),m(12,"iframe",48),d(13,"safe"),a()()()}if(t&2){let e=s(2);n(3),c(" ",u(4,2,"details.playTrailer")," "),n(9),_("src",u(13,4,e.youtubeUrl),V)}}function Ve(t,i){if(t&1&&m(0,"app-item",53),t&2){let e=i.$implicit;_("film",e)}}function Ue(t,i){if(t&1&&(m(0,"div",49),o(1,"div",50)(2,"h3",51),r(3),d(4,"translate"),a(),o(5,"div",52),C(6,Ve,1,1,"app-item",53,he),a()()),t&2){let e=s(2);n(3),v(u(4,1,"details.recommendations")),n(3),w(e.recommendations)}}function Fe(t,i){if(t&1){let e=T();o(0,"div",4)(1,"div",5),m(2,"img",6),a(),o(3,"div",7)(4,"div",8)(5,"h1",9),r(6),a(),o(7,"button",10),y("click",function(){h(e);let p=s();return b(p.toggleWishlist())}),m(8,"i",11),a()(),z(9,we,2,1,"p",12),o(10,"div",13)(11,"span",14),m(12,"i",15),r(13),d(14,"date"),a(),f(15,ye,8,4,"div",16),a(),o(16,"div",17),f(17,ke,3,1,"div",18),o(18,"span",19),r(19),d(20,"number"),a(),o(21,"span",20),r(22),d(23,"number"),a()(),o(24,"div",21)(25,"h3",22),r(26),d(27,"translate"),a(),o(28,"p",23),r(29),a()(),o(30,"div",24)(31,"h3",22),r(32),d(33,"translate"),a(),o(34,"div",25),C(35,Ee,2,2,"a",26,k),a()(),m(37,"div",27),o(38,"div",28),f(39,Me,6,3,"div"),f(40,Be,8,2,"div",29),f(41,Re,6,8,"div"),f(42,Pe,6,8,"div"),a(),o(43,"div",30),f(44,We,3,4,"a",31),f(45,Le,14,6),a()()(),f(46,Ue,8,3)}if(t&2){let e=s();n(2),_("src",e.film.poster_path?e.imageBase+e.film.poster_path:"imgnotfound.png",S)("alt",e.film.title),n(4),v(e.film.title),n(),D("bg-error",e.isInWishlist())("text-white",e.isInWishlist()),n(),D("fa-heart-crack",e.isInWishlist())("fa-heart",!e.isInWishlist()),n(),_("ngIf",e.film.tagline),n(4),c(" ",I(14,27,e.film.release_date,"mediumDate")," "),n(2),x(e.film.runtime?15:-1),n(2),x(e.film.vote_average!=null?17:-1),n(2),c("",I(20,30,e.film.vote_average/2,"1.1-1"),"/5"),n(3),c("votes: ",u(23,33,e.film.vote_count)),n(4),v(u(27,35,"details.overview")),n(3),c(" ",e.film.overview," "),n(3),v(u(33,37,"details.genres")),n(3),w(e.film.genres),n(4),x(e.film.spoken_languages.length?39:-1),n(),x(e.film.production_companies.length>0?40:-1),n(),x(e.film.budget?41:-1),n(),x(e.film.revenue?42:-1),n(2),x(e.film.homepage?44:-1),n(),x(e.trailerKey?45:-1),n(),x(e.recommendations.length>0?46:-1)}}var B=class t{trailerModal;router=g(ne);route=g(ie);svc=g(de);WishlistResourceSvc=g(ce);auth=g(se);toast=g(me);translate=g(re);isTrailerOpen=!1;youtubeUrl="";openModal(i){this.isTrailerOpen=!0,this.youtubeUrl=`https://www.youtube.com/embed/${i}?autoplay=1`,this.trailerModal.nativeElement.showModal()}closeModal(){this.isTrailerOpen=!1,this.youtubeUrl=null,this.trailerModal.nativeElement.close()}onBackdropClick(i){let e=this.trailerModal.nativeElement;i.target===e&&this.closeModal()}imageBase="https://image.tmdb.org/t/p/w500";ngOnInit(){this.route.paramMap.subscribe(i=>{let e=Number(i.get("id"));e&&!isNaN(e)&&this.svc.id.set(e)}),this.router.events.subscribe(i=>{i instanceof te&&window.scrollTo({top:0,behavior:"smooth"})})}get film(){return this.svc.movieDetails.value()}get recommendations(){return(this.svc.movieRecommendations.value()?.results??[]).filter(l=>l.genre_ids?.includes(16)).slice(0,6)}get trailerKey(){let e=(this.svc.movieTrailer.value()?.results??[]).find(l=>l.site?.toLowerCase()==="youtube"&&(l.type?.toLowerCase()==="trailer"||l.type?.toLowerCase()==="teaser"));return e?e.key:null}get isLoadingAll(){return this.svc.movieDetails.isLoading()||this.svc.movieTrailer.isLoading()||this.svc.movieRecommendations.isLoading()}get hasError(){return this.svc.movieDetails.error()||this.svc.movieTrailer.error()||this.svc.movieRecommendations.error()}formatRuntime(i){if(!i)return"\u2014";let e=Math.floor(i/60),l=i%60;return e>0?`${e}h ${l}m`:`${l}m`}math(i){return i/2}isInWishlist=q(()=>{if(this.film?.id)return this.WishlistResourceSvc.wishlistIds().includes(this.film.id)});toggleWishlist(){return P(this,null,function*(){if(!this.auth.currentUser){this.showToastMessage(this.translate.instant("item.login_required"),"error");return}this.isInWishlist()?(yield this.WishlistResourceSvc.removeItem(this.film.id),this.showToastMessage(this.translate.instant("item.removed"),"info")):(yield this.WishlistResourceSvc.addItem(this.film.id),this.showToastMessage(this.translate.instant("item.added"),"success"))})}showToastMessage(i,e="info"){this.toast.show(i,e,2500)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=F({type:t,selectors:[["app-details"]],viewQuery:function(e,l){if(e&1&&N(_e,5),e&2){let p;O(p=A())&&(l.trailerModal=p.first)}},decls:4,vars:1,consts:[["trailerModal",""],[1,"page-container","p-4","md:p-8"],["type","details"],[1,"error","text-error","text-lg","text-center","mt-8"],[1,"details-card","flex","flex-col","md:flex-row","gap-8","p-6","md:p-10","bg-base-100","dark:bg-base-200","rounded-3xl","shadow-2xl","transition-all"],[1,"left","flex-shrink-0","w-full","md:w-1/3","max-w-sm","mx-auto","md:mx-0"],[1,"poster","w-full","rounded-2xl","shadow-xl","transition-transform","hover:scale-105",3,"src","alt"],[1,"right","flex-1","flex","flex-col"],[1,"header-row","flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","gap-2","md:gap-0"],[1,"title","text-3xl","md:text-4xl","font-extrabold"],["aria-label","Favorite button",1,"btn","btn-circle","btn-lg","shadow-lg","backdrop-blur-sm","transition-all","border-2","border-base-200","dark:border-base-100","hover:bg-error","hover:text-white",3,"click"],[1,"fa-solid"],["class","tagline text-base text-muted mt-1 italic",4,"ngIf"],[1,"meta","flex","flex-wrap","gap-4","mt-4","items-center","text-sm","text-gray-500","dark:text-gray-300"],[1,"flex","items-center","gap-1","my-text","cursor-default"],[1,"fas","fa-calendar-alt"],[1,"tooltip"],[1,"flex","items-center","gap-3","mt-3"],[1,"stars","flex","items-center","gap-1"],[1,"text-sm","font-semibold"],[1,"text-sm","opacity-70"],[1,"mt-6"],[1,"text-lg","font-semibold","mb-2","my-text"],[1,"p-4","rounded-xl","bg-base-200/60","dark:bg-base-300/40","text-base-content","text-sm","md:text-base","leading-relaxed","shadow-sm","border","border-base-300/40","backdrop-blur-sm"],[1,"genres","mt-4"],[1,"flex","flex-wrap","gap-2"],[1,"btn","btn-outline","btn-warning",3,"routerLink"],[1,"divider","mb-0"],[1,"extras","mt-5","grid","grid-cols-1","sm:grid-cols-2","gap-2","text-sm"],[1,"flex","flex-wrap","items-center"],[1,"buttons","flex","flex-wrap","gap-3","mt-6"],["target","_blank","rel","noopener",1,"btn","btn-primary","transition-transform","hover:scale-105",3,"href"],[1,"tagline","text-base","text-muted","mt-1","italic"],[1,"tooltip-content"],[1,"text-white-400"],["data-tip","duration",1,"flex","items-center","gap-1","my-text","cursor-default"],[1,"fas","fa-clock"],[1,"fa-solid","fa-star","w-5","h-5",3,"ngClass"],[1,"tooltip","w-25"],[1,"mx-2",3,"src"],[1,"btn","btn-outline","flex","items-center","gap-2","transition-transform","hover:scale-105",3,"click"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4"],["d","M4 4l12 6-12 6V4z"],[1,"modal",3,"click"],[1,"modal-box","max-w-3xl","bg-base-200"],["method","dialog"],[1,"btn","btn-sm","btn-circle","btn-ghost","absolute","right-3","top-3",3,"click"],[1,"aspect-video","mt-4","rounded-xl","overflow-hidden"],["width","100%","height","100%","frameborder","0","allow","autoplay; encrypted-media","allowfullscreen","",3,"src"],[1,"divider","mt-10"],[1,"recommendations"],[1,"text-xl","font-semibold","mb-3"],[1,"rec-row","grid","grid-cols-2","sm:grid-cols-3","md:grid-cols-6","gap-4"],[3,"film"]],template:function(e,l){e&1&&(o(0,"div",1),f(1,be,1,0,"app-skeleton",2)(2,Ce,2,1,"div",3)(3,Fe,47,39),a()),e&2&&(n(),x(l.isLoadingAll?1:l.hasError?2:l.film?3:-1))},dependencies:[Z,H,G,oe,ae,fe,pe,X,Y,J,E,le],styles:[".my-text[_ngcontent-%COMP%]{background:var(--hover-color);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;color:transparent}.my-text[_ngcontent-%COMP%]:hover{background:var(--primary-color);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;color:transparent}"]})};export{B as default};
