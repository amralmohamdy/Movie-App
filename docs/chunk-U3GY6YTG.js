import{j as V}from"./chunk-GVJVKNK5.js";import{a as H}from"./chunk-NSFZQY46.js";import"./chunk-SKXOHVQE.js";import{d as F}from"./chunk-A2E7AYG3.js";import{J as L}from"./chunk-62NZN4HA.js";import{Aa as P,Ab as j,Ba as a,C as k,Ca as p,D as M,Da as d,E as x,F as f,J as w,Qa as o,Ra as l,T as e,Wa as C,X as u,Y as S,ba as E,db as q,e as g,ea as b,fa as _,ia as R,ja as B,ka as h,kb as W,la as t,ma as i,na as m,ra as T,sa as O,tb as D,ua as y,ub as N}from"./chunk-PZ3TUFL2.js";var z=(r,s)=>s.id;function A(r,s){r&1&&(t(0,"div",6)(1,"div",9),x(),t(2,"svg",10),m(3,"path",11),i()(),f(),t(4,"h2",12),a(5),o(6,"translate"),i(),t(7,"p",13),a(8),o(9,"translate"),i(),t(10,"button",14),a(11),o(12,"translate"),i()()),r&2&&(e(5),d(" ",l(6,3,"wishlist.empty")," "),e(3),p(l(9,5,"wishlist.desc_em")),e(3),d(" ",l(12,7,"wishlist.btm")," "))}function G(r,s){if(r&1&&m(0,"app-item",17),r&2){let n=s.$implicit;h("film",n)}}function Z(r,s){r&1&&(x(),t(0,"svg",35),m(1,"circle",36)(2,"path",37),i())}function Q(r,s){if(r&1){let n=T();t(0,"div",7)(1,"main",15)(2,"div",16),R(3,G,1,1,"app-item",17,z),i()(),t(5,"aside",18)(6,"div",19)(7,"h4",20),a(8),o(9,"translate"),i(),t(10,"p",21),a(11),o(12,"translate"),t(13,"strong"),a(14),i(),a(15),o(16,"translate"),i()(),t(17,"div",22)(18,"button",23),a(19),o(20,"translate"),i(),t(21,"label",24),a(22),o(23,"translate"),i(),m(24,"input",25),t(25,"div",26)(26,"div",27)(27,"h3",28),a(28),o(29,"translate"),i(),t(30,"p",29),a(31),o(32,"translate"),i(),m(33,"progress",30),t(34,"div",31)(35,"label",32),a(36),o(37,"translate"),i(),t(38,"button",33),O("click",function(){k(n);let v=y();return M(v.confirmClear())}),E(39,Z,3,0,"svg",34),a(40),o(41,"translate"),i()()()()()()()}if(r&2){let n=y();e(3),B(n.wishlistMovies()),e(5),p(l(9,15,"wishlist.summary")),e(3),d(" ",l(12,17,"wishlist.yh")," "),e(3),p(n.wishlistCount()),e(),d(" ",l(16,19,"wishlist.hv")," "),e(4),p(l(20,21,"wishlist.pat")),e(3),d(" ",l(23,23,"wishlist.clear")," "),e(6),d("",l(29,25,"wishlist.clear")," ?"),e(3),d("",l(32,27,"wishlist.confirm")," "),e(2),h("value",n.progress()),e(2),P("disabled",n.deleting()),e(),p(l(37,29,"wishlist.no")),e(2),h("disabled",n.deleting()),e(),h("ngIf",n.deleting()),e(),d(" ",l(41,31,"wishlist.yes")," ")}}function Y(r,s){r&1&&(t(0,"div",8)(1,"div",38),x(),t(2,"svg",39),m(3,"path",40),i(),f(),t(4,"span"),a(5),o(6,"translate"),i()()()),r&2&&(e(5),p(l(6,1,"wishlist.removed")))}var I=class r{constructor(s,n,c){this.wishlistResource=s;this.auth=n;this.router=c}wishlistCount=C(()=>this.wishlistResource.wishlistCount());newItem=0;wishlistMovies=C(()=>this.wishlistResource.wishlistMoviesResource.value()??[]);showSnackbar=w(!1);deleting=w(!1);progress=w(0);ngOnInit(){this.wishlistResource.wishlistIdsResource.reload()}addItem(){return g(this,null,function*(){if(this.newItem!==0)try{yield this.wishlistResource.wishlistIdsResource.reload(),yield this.wishlistResource.refresh(),this.newItem=0}catch(s){console.error("Error adding item:",s)}})}removeItem(s){return g(this,null,function*(){try{yield this.wishlistResource.wishlistIdsResource.reload(),yield this.wishlistResource.refresh()}catch(n){console.error("Error removing item:",n)}})}confirmClear(){return g(this,null,function*(){let s=this.wishlistMovies().map(c=>c.id);if(!s.length)return;this.deleting.set(!0),this.progress.set(0);let n=100/s.length;try{for(let c of s)yield this.wishlistResource.wishlistSvc.removeFromWishlist(c),this.progress.update(v=>Math.min(v+n,100));yield this.wishlistResource.refresh(),this.showSnackbar.set(!0),setTimeout(()=>this.showSnackbar.set(!1),4e3)}catch(c){console.error("Error clearing wishlist:",c)}finally{this.deleting.set(!1);let c=document.getElementById("confirm-clear");c&&(c.checked=!1),this.progress.set(0)}})}static \u0275fac=function(n){return new(n||r)(u(F),u(L),u(D))};static \u0275cmp=S({type:r,selectors:[["app-wishlist"]],decls:13,vars:8,consts:[[1,"p-6","min-h-screen","bg-base-200"],[1,"p-6","rounded-lg","mb-8","text-center","flex","flex-col","gap-2","items-center"],[1,"cinematic-title","text-4xl","md:text-5xl","font-extrabold","flex","items-center","gap-3","text-blue-600","drop-shadow-md"],[1,"fa-solid","fa-clapperboard","text-3xl","md:text-4xl","text-blue-500"],[1,"mt-2","text-sm","text-gray-500","max-w-xl"],[1,"divider","w-[75%]","mx-auto","mb-8"],[1,"flex","flex-col","items-center","justify-center","py-16","text-center","transition-colors","duration-300"],[1,"grid","grid-cols-1","lg:grid-cols-4","gap-6"],[1,"toast","toast-top","toast-end","fixed","z-50","m-4"],[1,"w-20","h-20","mb-4","flex","items-center","justify-center","rounded-full","bg-base-200","dark:bg-base-300","shadow-inner"],["xmlns","http://www.w3.org/2000/svg","height","32px","viewBox","0 -960 960 960","width","32px","fill","currentColor"],["d","m480-120-58-52q-101-91-167-157T150-447.5Q111-500 95.5-544T80-634q0-94 63-157t157-63q52 0 99 22t81 62q34-40 81-62t99-22q94 0 157 63t63 157q0 46-15.5 90T810-447.5Q771-395 705-329T538-172l-58 52Zm0-108q96-86 158-147.5t98-107q36-45.5 50-81t14-70.5q0-60-40-100t-100-40q-47 0-87 26.5T518-680h-76q-15-41-55-67.5T300-774q-60 0-100 40t-40 100q0 35 14 70.5t50 81q36 45.5 98 107T480-228Zm0-273Z"],[1,"text-xl","font-semibold","text-base-content/90","mb-2"],[1,"text-base-content/60","max-w-sm","mb-6"],["routerLink","",1,"btn","my-btn","text-white","btn-wide","shadow-md","hover:scale-105","transition"],[1,"lg:col-span-3"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","gap-6"],[3,"film"],[1,"lg:col-span-1","p-4","bg-base-100","rounded-lg","shadow-lg","sticky","top-24","h-100","sidebar","hidden","lg:block"],[1,"mb-4"],[1,"text-lg","font-bold"],[1,"text-sm","text-gray-400","mt-2"],[1,"flex","flex-col","gap-3"],[1,"btn","btn-primary"],["for","confirm-clear",1,"btn","btn-ghost","text-red-400","cursor-pointer"],["type","checkbox","id","confirm-clear",1,"modal-toggle"],[1,"modal"],[1,"modal-box","relative"],[1,"font-bold","text-lg"],[1,"py-4"],["max","100",1,"progress","w-full","mb-4",3,"value"],[1,"modal-action"],["for","confirm-clear",1,"btn","btn-ghost"],[1,"btn","btn-error","flex","items-center","gap-2",3,"click","disabled"],["class","animate-spin h-5 w-5 mr-2 text-white","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","mr-2","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z",1,"opacity-75"],[1,"alert","alert-success","shadow-lg","flex","flex-row","items-center","gap-2"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"stroke-current","h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"]],template:function(n,c){n&1&&(t(0,"div",0)(1,"div",1)(2,"h1",2),m(3,"i",3),a(4),o(5,"translate"),i(),t(6,"p",4),a(7),o(8,"translate"),i()(),m(9,"div",5),b(10,A,13,9,"div",6)(11,Q,42,33,"div",7),i(),b(12,Y,7,3,"div",8)),n&2&&(e(4),d(" ",l(5,4,"wishlist.title")," "),e(3),d(" ",l(8,6,"wishlist.desc")," "),e(3),_(c.wishlistMovies().length===0?10:11),e(2),_(c.showSnackbar()?12:-1))},dependencies:[W,q,V,H,N,j],styles:[".cinematic-title[_ngcontent-%COMP%]{background:var(--primary-color);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 0 28px rgba(59,130,246,.18);animation:_ngcontent-%COMP%_fadeIn 1.1s ease-out;transition:all .32s ease}.cinematic-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;background:var(--primary-color);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent;filter:drop-shadow(0 0 8px rgba(0,170,255,.12));animation:_ngcontent-%COMP%_fadeIn 1.4s ease-out}.my-btn[_ngcontent-%COMP%]{background:var(--primary-color);border:var(--primary-color);transition:background all .4s ease-in-out}.my-btn[_ngcontent-%COMP%]:hover{background:var(--hover-color);border:var(--hover-color)}@media (max-width: 640px){.movie-card[_ngcontent-%COMP%]   .poster[_ngcontent-%COMP%]{height:12rem}.play-overlay[_ngcontent-%COMP%]{left:22%;right:22%}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.bg-base-50[_ngcontent-%COMP%]{background-color:#0d141d}.sidebar[_ngcontent-%COMP%]{position:sticky;top:6rem;align-self:start}.badge[_ngcontent-%COMP%]{transition:transform .2s ease,background-color .2s ease}.badge[_ngcontent-%COMP%]:change{transform:scale(1.2)}"]})};export{I as default};
