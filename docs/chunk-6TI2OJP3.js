import{a as z}from"./chunk-D6EJJF3N.js";import{a as q}from"./chunk-NSFZQY46.js";import"./chunk-SKXOHVQE.js";import{c as L}from"./chunk-A2E7AYG3.js";import"./chunk-62NZN4HA.js";import{Ab as A,Ba as c,C as d,Ca as b,D as g,Da as E,J as _,Na as j,Qa as P,Ra as y,T as a,Wa as F,Y as T,ba as V,bb as O,cb as B,e as p,ea as C,fa as f,ga as I,ia as S,ja as D,ka as m,kb as $,la as r,ma as s,na as w,ra as x,sa as u,ua as l,y as k}from"./chunk-PZ3TUFL2.js";var G=t=>({"my-btn text-white":t});function H(t,i){t&1&&w(0,"app-skeleton",2),t&2&&m("type","list")}function J(t,i){if(t&1&&(r(0,"div",3),c(1),s()),t&2){let e=l();a(),b(e.error())}}function K(t,i){if(t&1&&w(0,"app-item",8),t&2){let e=i.$implicit;m("film",e)}}function Q(t,i){if(t&1&&(r(0,"div",4),V(1,K,1,1,"app-item",7),s()),t&2){let e=l();a(),m("ngForOf",e.movies())}}function U(t,i){t&1&&(r(0,"div",5),c(1),P(2,"translate"),s()),t&2&&(a(),b(y(2,1,"newR.nof")))}function W(t,i){if(t&1){let e=x();r(0,"button",12),u("click",function(){d(e);let o=l(2);return g(o.changePage(o.visiblePages()[0]-1))}),c(1,"\u2026"),s()}}function X(t,i){if(t&1){let e=x();r(0,"button",13),u("click",function(){let o=d(e).$implicit,v=l(2);return g(v.changePage(o))}),c(1),s()}if(t&2){let e=i.$implicit,n=l(2);m("ngClass",j(2,G,n.page()===e)),a(),E(" ",e," ")}}function Y(t,i){if(t&1){let e=x();r(0,"button",12),u("click",function(){d(e);let o=l(2);return g(o.changePage(o.visiblePages()[o.visiblePages().length-1]+1))}),c(1," \u2026"),s()}}function Z(t,i){if(t&1){let e=x();r(0,"div",6)(1,"button",9),u("click",function(){d(e);let o=l();return g(o.prevPage())}),c(2,"\xAB"),s(),C(3,W,2,0,"button",10),S(4,X,2,4,"button",11,I),C(6,Y,2,0,"button",10),r(7,"button",9),u("click",function(){d(e);let o=l();return g(o.nextPage())}),c(8," \xBB "),s()()}if(t&2){let e=l();a(),m("disabled",e.page()===1),a(2),f(e.visiblePages()[0]>1?3:-1),a(),D(e.visiblePages()),a(2),f(e.visiblePages()[e.visiblePages().length-1]<e.totalPages()?6:-1),a(),m("disabled",e.page()===e.totalPages())}}var N=class t{moviesResources=k(L);movies=_([]);loading=_(!1);error=_(null);page=_(1);totalPages=_(1);visiblePages=F(()=>{let i=this.page(),e=this.totalPages(),n=5,o=Math.floor(n/2),v=Math.max(1,i-o),M=Math.min(e,v+n-1);v=Math.max(1,M-n+1);let R=[];for(let h=v;h<=M;h++)R.push(h);return R});ngOnInit(){return p(this,null,function*(){yield this.loadMovies()})}loadMovies(i=1){return p(this,null,function*(){this.loading.set(!0),this.error.set(null);try{let e=this.moviesResources.lang(),n=yield this.moviesResources.fetchNowPlayingMovies(i,e);this.movies.set(n.results??[]),this.totalPages.set(n.total_pages??1)}catch(e){this.error.set(e instanceof Error?e.message:String(e)),this.movies.set([]),this.totalPages.set(1)}finally{this.loading.set(!1)}})}changePage(i){return p(this,null,function*(){i=Math.max(1,Math.min(i,this.totalPages())),this.page.set(i),yield this.loadMovies(i)})}nextPage(){return p(this,null,function*(){yield this.changePage(this.page()+1)})}prevPage(){return p(this,null,function*(){yield this.changePage(this.page()-1)})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=T({type:t,selectors:[["app-new-releases"]],decls:9,vars:5,consts:[[1,"container","mx-auto","p-4"],[1,"text-2xl","font-semibold","mb-4"],[3,"type"],[1,"text-error","text-center"],[1,"grid","grid-cols-2","sm:grid-cols-3","md:grid-cols-4","lg:grid-cols-5","gap-4"],[1,"py-8","text-center","text-muted"],[1,"join","flex","justify-center","mt-8"],[3,"film",4,"ngFor","ngForOf"],[3,"film"],[1,"join-item","btn",3,"click","disabled"],[1,"join-item","btn"],[1,"join-item","btn",3,"ngClass"],[1,"join-item","btn",3,"click"],[1,"join-item","btn",3,"click","ngClass"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"h1",1),c(2),P(3,"translate"),s(),C(4,H,1,1,"app-skeleton",2)(5,J,2,1,"div",3)(6,Q,2,1,"div",4)(7,U,3,3,"div",5),C(8,Z,9,4,"div",6),s()),e&2&&(a(2),b(y(3,3,"newR.title")),a(2),f(n.loading()?4:n.error()?5:!n.loading()&&!n.error()?6:!n.loading()&&n.movies().length===0?7:-1),a(4),f(n.totalPages()>1?8:-1))},dependencies:[$,O,B,q,z,A],styles:[".my-btn[_ngcontent-%COMP%]{background:var(--hover-color);border:var(--hover-color);color:var(--white-color)}.my-btn[_ngcontent-%COMP%]:hover{background:var(--primary-color);border:var(--primary-color)}"],changeDetection:0})};export{N as default};
