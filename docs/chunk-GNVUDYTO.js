import{b as O,c as W,f as L,j as z}from"./chunk-KTE6HO7I.js";import{a as G}from"./chunk-SGQGAOMW.js";import{a as Q}from"./chunk-FJ6JWJHS.js";import{c as A}from"./chunk-QU2DSLHC.js";import"./chunk-ZR5CBTAD.js";import{Ba as c,Bb as V,C,Ca as d,D as k,Da as g,Ga as E,Ha as P,Ia as D,Ja as B,Ra as l,Sa as s,T as n,Xa as f,Y as w,Ya as N,e as y,ea as _,fa as x,ia as q,ja as T,ka as p,la as r,lb as j,ma as o,na as m,ra as I,sa as v,sb as R,ua as S,ub as F,y as h}from"./chunk-G3D7CDXJ.js";var H=(e,t)=>t.id;function J(e,t){e&1&&m(0,"app-skeleton",9),e&2&&p("type","list")}function K(e,t){e&1&&(r(0,"div",10),c(1),l(2,"translate"),o()),e&2&&(n(),g(" ",s(2,1,"search.nof"),` \u{1F3AC}
`))}function U(e,t){if(e&1&&m(0,"app-item",14),e&2){let a=t.$implicit;p("film",a)}}function X(e,t){if(e&1&&(r(0,"div",11),q(1,U,1,1,"app-item",14,H),o()),e&2){let a=S();n(),T(a.movies)}}function Y(e,t){e&1&&(m(0,"app-skeleton",15),r(1,"button",16),c(2),l(3,"translate"),o()),e&2&&(p("type","list"),n(2),d(s(3,2,"search.loading")))}function Z(e,t){if(e&1){let a=I();r(0,"button",17),v("click",function(){C(a);let u=S();return k(u.loadMore())}),c(1),l(2,"translate"),o()}e&2&&(n(),d(s(2,1,"search.lm")))}var M=class e{route=h(R);router=h(F);moviesService=h(A);query="";movies=[];moviesEffect=N(()=>{let t=this.moviesService.searchMovies.value()?.results??[];t.length&&(this.movies=[...this.movies,...t])});movieResults=f(()=>this.moviesService.searchMovies.value()?.results??[]);page=1;totalPages=f(()=>this.moviesService.searchMovies.value()?.total_pages??1);loading=f(()=>this.moviesService.searchMovies.isLoading()??!1);ngOnInit(){this.route.queryParamMap.subscribe(t=>{this.query=t.get("q")||"",this.query.trim()&&(this.movies=[],this.page=1,this.loadMovies())})}onSearch(){this.query.trim()&&this.router.navigate(["/search"],{queryParams:{q:this.query}})}loadMovies(){return y(this,null,function*(){this.query.trim()&&(this.moviesService.pageSearch.set(this.page),this.moviesService.searchQuery.set(this.query))})}loadMore(){return y(this,null,function*(){this.page<this.totalPages()&&(this.page++,yield this.loadMovies())})}static \u0275fac=function(a){return new(a||e)};static \u0275cmp=w({type:e,selectors:[["app-search"]],decls:24,vars:19,consts:[[1,"relative","hero","min-h-[25vh]","flex","items-center","justify-center","overflow-hidden","text-white","bg-fixed","bg-center","bg-cover",2,"background-image","url('bg-search.jpg')"],[1,"absolute","inset-0","bg-black/70","backdrop-blur-sm"],[1,"relative","text-center","max-w-2xl","px-4","z-10"],[1,"text-5xl","font-bold","mb-4"],[1,"word"],[1,"text-gray-300","text-lg","mb-6"],[1,"join","w-full","max-w-md","mx-auto"],["type","text",1,"input","input-bordered","join-item","w-full","transition-all","duration-200","bg-base-200","text-base-content","placeholder-base-content/60","focus:outline-none","focus:ring-2","focus:ring-primary/50","focus:border-primary",3,"ngModelChange","keyup.enter","placeholder","ngModel"],[1,"btn","btn-primary","my","join-item","text-white",3,"click"],[1,"p-2",3,"type"],[1,"col-span-full","text-center","text-gray-400","py-10"],[1,"grid","grid-cols-2","md:grid-cols-4","lg:grid-cols-5","gap-4","my-8","px-4"],[1,"text-center","my-6"],[1,"btn","btn-primary","btn-wide"],[3,"film"],[1,"p-2","my-6",3,"type"],["disabled","",1,"btn","btn-primary","btn-wide"],[1,"btn","btn-primary","btn-wide",3,"click"]],template:function(a,i){a&1&&(r(0,"section",0),m(1,"div",1),r(2,"div",2)(3,"h1",3),c(4),l(5,"translate"),r(6,"span",4),c(7),l(8,"translate"),o()(),r(9,"p",5),c(10),l(11,"translate"),o(),r(12,"div",6)(13,"input",7),l(14,"translate"),D("ngModelChange",function(b){return P(i.query,b)||(i.query=b),b}),v("keyup.enter",function(){return i.onSearch()}),o(),r(15,"button",8),v("click",function(){return i.onSearch()}),c(16),l(17,"translate"),o()()()(),_(18,J,1,1,"app-skeleton",9)(19,K,3,3,"div",10)(20,X,3,0,"div",11),r(21,"div",12),_(22,Y,4,4)(23,Z,3,3,"button",13),o()),a&2&&(n(4),g(" ",s(5,9,"search.library")," "),n(3),d(s(8,11,"search.mov")),n(3),g(" ",s(11,13,"search.desc")," "),n(3),p("placeholder",B(s(14,15,"search.input"))),E("ngModel",i.query),n(3),d(s(17,17,"search.btn")),n(2),x(i.loading()&&i.movies.length===0?18:i.movies.length===0&&!i.loading()?19:20),n(4),x(i.loading()?22:i.movies.length>0&&i.page<i.totalPages()?23:-1))},dependencies:[z,O,W,L,j,Q,G,V],styles:[".word[_ngcontent-%COMP%]{background:var(--hover-color);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;color:transparent}.my[_ngcontent-%COMP%]{background:var(--hover-color);border:var(--hover-color);box-shadow:var(--hover-color)}"]})};export{M as default};
