<div class="container mx-auto p-4">
  <h1 class="text-2xl font-semibold mb-4">Genres</h1>

  <!-- Genres row -->
  <div *ngIf="loadingGenres()" class="py-4 text-center">Loading genres...</div>
  <div *ngIf="errorGenres()" class="text-red-500 mb-4">{{ errorGenres() }}</div>

  <div class="flex flex-wrap gap-2 mb-6">
    <button
      *ngFor="let g of genres()"
      class="px-3 py-2 rounded-full border hover:bg-base-200"
      [class.bg-primary]="selectedGenreId() === g.id"
      (click)="selectGenre(g.id)"
    >
      {{ g.name }}
    </button>
  </div>

  <!-- Movies area -->
  <div *ngIf="loadingMovies()" class="py-8">
    <div class="text-center">Loading movies...</div>
  </div>

  <div *ngIf="errorMovies()" class="text-red-500">{{ errorMovies() }}</div>

  <div
    *ngIf="!loadingMovies() && !errorMovies()"
    class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 my-8"
  >
    <app-item *ngFor="let m of movies()" [film]="m"></app-item>
  </div>

  <div *ngIf="!loadingMovies() && movies().length === 0" class="py-8 text-center text-muted">
    No movies found for this genre.
  </div>

  <!-- Pagination -->
  <div class="join flex justify-center mt-8">
    <button class="join-item btn" [disabled]="page() === 1" (click)="prevPage()">«</button>

    <button
      *ngIf="visiblePages()[0] > 1"
      class="join-item btn"
      (click)="changePage(visiblePages()[0] - 1)"
    >
      …
    </button>

    <button
      *ngFor="let p of visiblePages()"
      (click)="changePage(p)"
      class="join-item btn"
      [ngClass]="{ 'btn-primary text-white': page() === p }"
    >
      {{ p }}
    </button>

    <button
      *ngIf="visiblePages()[visiblePages().length - 1] < totalPages()"
      class="join-item btn"
      (click)="changePage(visiblePages()[visiblePages().length - 1] + 1)"
    >
      …
    </button>

    <button class="join-item btn" [disabled]="page() === totalPages()" (click)="nextPage()">
      »
    </button>
  </div>
</div>
